syntax = "proto3";

package holms.types.reporting.rpc;
option csharp_namespace = "HOLMS.Types.Reporting.RPC";
option go_package = "operations/rpc";

import "google/protobuf/timestamp.proto";
import "google/protobuf/empty.proto";
import "iam/staff_member_indicator.proto";
import "primitive/pb_inclusive_opsdate_range.proto";
import "tenancy_config/indicators/property_indicator.proto";

enum InHouseGuestReportSorting {
	BY_GUEST_NAME = 0;
	BY_ROOM_NUMBER = 1;
}
	
message FrontDeskReportingSvcRequest {
	google.protobuf.Timestamp date = 1;
}

message FrontDeskReportingSvcInHouseGuestsRequest {
	google.protobuf.Timestamp date = 1;
	InHouseGuestReportSorting sort_type = 2;
}

message FrontDeskReportingSvcCancelledReservationsRequest {
	holms.types.primitive.PbInclusiveOpsdateRange date_range = 1;
}

message FrontDeskReportingSvcHousekeepingRequest {
	repeated .holms.types.iam.StaffMemberIndicator staff_members = 1;
	string add_notes = 2;
}

message FrontDeskReportingSvcPropertyTimeRangeRequest {
	google.protobuf.Timestamp reporting_interval_start = 1;
	google.protobuf.Timestamp reporting_interval_end = 2;
	holms.types.tenancy_config.indicators.PropertyIndicator property = 3;
}

message FrontDeskReportingSvcPropertyDateRangeRequest {
	holms.types.primitive.PbInclusiveOpsdateRange date_range = 1;
	holms.types.tenancy_config.indicators.PropertyIndicator property = 2;
}

message FrontDeskReportingSvcReportResponse {
	string document = 1;
}

service FrontDeskReportingSvc {
    // Daily reports -- these should get consolidated into a single call
    // with all reports selected as booleans like include_XXX
    rpc GetArrivalsReport(FrontDeskReportingSvcRequest)
        returns (FrontDeskReportingSvcReportResponse);
    rpc GetCancelledReservationsReport(FrontDeskReportingSvcCancelledReservationsRequest)
        returns (FrontDeskReportingSvcReportResponse);
    rpc GetDeparturesReport(FrontDeskReportingSvcRequest)
        returns (FrontDeskReportingSvcReportResponse);
    rpc GetInHouseGuestsReport(FrontDeskReportingSvcInHouseGuestsRequest)
        returns (FrontDeskReportingSvcReportResponse);
    rpc GetNoShowsReport(FrontDeskReportingSvcRequest)
        returns (FrontDeskReportingSvcReportResponse);

    // Folio activity
    rpc GetFolioBalancesReport(google.protobuf.Empty)
        returns (FrontDeskReportingSvcReportResponse);
    rpc GetFolioGrossChargesReport(FrontDeskReportingSvcPropertyTimeRangeRequest)
        returns (FrontDeskReportingSvcReportResponse);
    rpc GetFolioPaymentsReport(FrontDeskReportingSvcPropertyTimeRangeRequest)
        returns (FrontDeskReportingSvcReportResponse);

    // Ledger summary
    rpc GetLedgerActivitySummary(FrontDeskReportingSvcPropertyTimeRangeRequest)
        returns (FrontDeskReportingSvcReportResponse);

    // Vehicle report
    rpc GetVehiclesReport(google.protobuf.Empty)
        returns (FrontDeskReportingSvcReportResponse);

    // Distribution
    rpc GetGeneralAvailabilityReport(FrontDeskReportingSvcPropertyDateRangeRequest)
    	returns (FrontDeskReportingSvcReportResponse);

    // Not sure where this goes?
    rpc GetHousekeepingAssignmentsReport(FrontDeskReportingSvcHousekeepingRequest)
        returns (FrontDeskReportingSvcReportResponse);
}
